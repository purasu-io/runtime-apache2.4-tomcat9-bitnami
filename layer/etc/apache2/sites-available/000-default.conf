<VirtualHost *:8080>
  <Location "/WEB-INF/*">
    AllowOverride None
    deny from all
  </Location>

  <Proxy *>
    Order deny,allow
    Allow from all
  </Proxy>

  ProxyPass /manager ajp://localhost:8009/manager/
  ProxyPass /sample ajp://localhost:8009/sample/
  ProxyPass /DemoWeb ajp://localhost:8009/DemoWeb/

  ProxyPass /debug ajp://localhost:8009/debug/
  ProxyPassMatch ^/(.*\.jsp)$ ajp://localhost:8009/
  ProxyPassReverse / ajp://localhost:8009/

  DocumentRoot "/a/shared/public"

  ErrorLog /dev/stderr
  CustomLog /dev/stdout combined

  <Directory /a/shared/public>
    Options FollowSymLinks
    AllowOverride All
    Require all granted
  </Directory>

  DirectoryIndex index.html index.htm index.shtml index.jsp

  Alias /healthz /a/healthz

  ## Which hosts to get X-Real-IP headers from.
  # RemoteIPInternalProxy 10.0.0.2 10.0.0.3
  RemoteIPHeader X-Real-IP

  SetEnvIf X-Forwarded-Proto "https" HTTPS=on
</VirtualHost>
